# Eurostat Correlation Finder

This project automatically downloads time-series data from Eurostat, analyzes correlations between core and quirky indicators across European countries, and visualizes the strongest (and most absurd) relationships. Each visualization includes a satirical academic explanation generated by OpenAI's GPT models.

## Features

- Downloads and processes dozens of Eurostat indicators (core and fun/quirky)
- Cleans and standardizes the data for cross-country analysis
- Identifies highly correlated variable pairs for each country
- Generates interactive, Apple-inspired HTML visualizations for each spurious correlation
- Each visualization includes a unique, AI-generated satirical academic explanation
- Supports limiting the number of visualizations for quick testing

## Installation

1. Clone this repository
2. Create a virtual environment:
   ```bash
   python -m venv venv
   source venv/bin/activate  # On Windows: venv\Scripts\activate
   ```
3. Install dependencies:
   ```bash
   pip install -r requirements.txt
   ```
   If you don't have a requirements.txt, install manually:
   ```bash
   pip install pandas numpy requests matplotlib plotly seaborn scipy eurostat openai tenacity
   ```

## OpenAI API Setup

To generate AI-powered explanations, you need an OpenAI API key:
1. Get your API key from https://platform.openai.com/api-keys
2. Set it as an environment variable before running the script:
   ```bash
   export OPENAI_API_KEY='sk-...yourkey...'
   ```

## Usage

Run the main script:
```bash
python eurostat_correlation_finder.py
```

### To generate only a few visualizations for testing
Edit the `find_spurious_correlations` function in `eurostat_correlation_finder.py` and set:
```python
max_visualizations = 5  # or any number you want
visualization_count = 0
# ... inside the plotting loop ...
if visualization_count >= max_visualizations:
    break
# after each plot:
visualization_count += 1
```

## Data Sources

The script fetches a wide range of indicators, including:
- Core: GDP, unemployment, population, education, life expectancy
- Fun/quirky: cheese production, beer production, ice cream production, cinema admissions, museums per capita, public libraries, sports club membership, fruit consumption, chocolate production, McDonald's restaurants, UNESCO sites, coffee imports, book titles published, electric cars, rooms per dwelling, cinema screens, theme park visits, football clubs, average TV time, and more

## Output

- Interactive HTML visualizations in the `visualizations/` directory
- Each file is named like `spurious_<var1>_vs_<var2>_<country>.html`
- Each visualization includes:
  - A dual-axis time series plot
  - The full country name
  - A satirical, AI-generated academic explanation

## Troubleshooting

- If you see quota or model errors from OpenAI, check your API key, plan, and quota at https://platform.openai.com/account/usage
- If you want to use a different model, edit the `model` parameter in the script (e.g., `gpt-3.5-turbo`)
- If you have no OpenAI quota, the script will fall back to a basic explanation

## License
MIT
